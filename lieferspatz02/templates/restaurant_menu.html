{% extends "base.html" %}
{% block title %}Menu{% endblock %}
{% block button %}
    <a href="/home" class="button-link">Home</a>
    <a href="{{url_for('order_cart.view_cart')}}" class="button-link">Cart</a>
    <form action="/logout_customer" method="POST">
        <input type="submit" value="Logout" class="button-link">
    </form>
{% endblock %}
{% block content %}
<head> 
    <style>
        .logo-img {
            width: 50px; /* Set your preferred width */
            height: 50px; /* Set your preferred height */
            object-fit: cover; /* Optional: Maintain aspect ratio while filling the box */
        }
    </style>
</head>
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for msg in messages %}
                <p>{{ msg }}</p>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <h1>Welcome to the Menu of {{ restaurants[2] }} {{ customer_id }}</h1>

    <h2>Description: {{ restaurants[7] }}</h2>

    <h2>Restaurant Name: {{ restaurants[2] }}</h2>
    <p>Address: {{ restaurants[3] }}, {{ restaurants[4] }}</p>

        {% if menus %}
            <h3>Menu</h3>
            <div class="menu-container">
                {% for menu in menus %}
                    <div class="menu-item">
                        <div class="info-container">
                            <h4>{{ menu['menu'][1] }}</h4>
                            <p>Price: {{ menu['menu'][3] }}</p>
                            <p>Detail: {{ menu['menu'][2] }}</p>
                            <p>Type: {{ menu['menu'][4] }}</p>
                        </div>
                        <div class="image-container">
                            <img class="logo-img" src="data:image/*;base64,{{ menu['logo'] }}" alt="food Logo">
                        </div>
                        <div class="add-to-cart-button">
                            <form class="add-to-cart-form">
                                <input type="hidden" name="item_id" value="{{ menu['menu'][0] }}">
                                <input type="hidden" name="restaurant_id" value="{{ restaurants[0] }}">
                                <input type="hidden" name="customer_id" value="{{ customer_id }}">
                                <input type="hidden" name="price" value="{{ menu['menu'][3] }}">
                                <input type="hidden" name="restaurant_name" value="{{ restaurants[1] }}">
                                <input type="hidden" name="item_name" value="{{ menu['menu'][1] }}">
                                <input type="button" value="Add to Cart" class="button add-to-cart-btn">
                            </form>
                        </div>
                        <div style="clear:both;"></div> <!-- Clear the float -->
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No menu items available.</p>
        {% endif %}
        
   
</body>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script>
    $(document).ready(function () {
        $(".add-to-cart-btn").click(function () {
            var form = $(this).closest(".add-to-cart-form");

            // Serialize the form data
            var formData = form.serialize();

            // AJAX request to add item to the cart
            $.ajax({
                url: "/order_cart/add_to_cart",
                type: "POST",
                data: formData,
                success: function (response) {
                    // Handle success, if needed
                    alert(response.message); // Display a message or perform other actions
                },
                error: function (error) {
                    // Handle error, if needed
                    console.error("Error adding to cart:", error);
                }
            });
        });
    });
</script>

<style>
    /* Updated styles for the bordered box with off-white color */
    .logo-img {
        width: 50px; 
        height: 50px; 
        object-fit: cover; /* Optional: Maintain aspect ratio while filling the box */
    }

    .bordered-box {
        border: 2px solid #f8f8f8;
        padding: 10px;
        border-radius: 8px;
        background-color: #f8f8f8; 
        margin-bottom: 10px;
        float: left;
    }

    /* Styles for the Add to Cart button */
    .add-to-cart-button {
        float: right;
        margin-top: 10px;
    }
  
    .menu-item {
        border: 2px solid #f8f8f8;
        border-radius: 16px;
        background-color: #f8f8f8; 
        margin-bottom: 20px; 
        overflow: auto;
        width: 100%;
    }

    .button {
        background-color: #4CAF50;
        color: white;
        padding: 10px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 14px;
        cursor: pointer;
        border-radius: 5px;
    }

    .menu-container {
    display: flex;
    flex-wrap: wrap;
    }

    .info-container {
        width: 60%; /* Adjust as needed */
        float: left;
    }

    .image-container {
        width: 40%; /* Adjust as needed */
        float: right;
        margin-top: 10px; /* Adjust as needed */
    }

    .logo-img {
        width: 80%; /* Make the image fill its container */
        height: auto; /* Maintain aspect ratio */
    }
</style>

</html>
{% endblock %}
